{"remainingRequest":"F:\\WebStorm\\new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\WebStorm\\new\\src\\views\\Customer\\Index.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"F:\\WebStorm\\new\\src\\views\\Customer\\Index.vue","mtime":1536290331574},{"path":"F:\\WebStorm\\new\\node_modules\\css-loader\\index.js","mtime":1637058075152},{"path":"F:\\WebStorm\\new\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1628769447361},{"path":"F:\\WebStorm\\new\\node_modules\\postcss-loader\\src\\index.js","mtime":1627888934314},{"path":"F:\\WebStorm\\new\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1637221925494},{"path":"F:\\WebStorm\\new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1637058075377},{"path":"F:\\WebStorm\\new\\node_modules\\vue-loader\\lib\\index.js","mtime":1628769447361}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.page {\r\n  margin: 20px;\r\n  padding: 20px;\r\n  background-color: #fff;\r\n  border: 1px solid #eee;\r\n  border-radius: 4px;\r\n  .search {\r\n    display: none;\r\n    width: 500px;\r\n    Button {\r\n      margin-left: 10px;\r\n    }\r\n  }\r\n  .button-group {\r\n    margin-top: 20px;\r\n    margin-bottom: 20px;\r\n  }\r\n  .table {\r\n    margin-bottom: 20px;\r\n    Button {\r\n      color: cornflowerblue;\r\n    }\r\n  }\r\n  .pagination {\r\n    width: 100%;\r\n    height: 32px;\r\n    .text {\r\n      float: left;\r\n      line-height: 32px;\r\n    }\r\n    .pager {\r\n      float: right;\r\n    }\r\n  }\r\n}\r\n.detail-table {\r\n  width: 100%;\r\n  font-size: 16px;\r\n  line-height: 32px;\r\n}\r\n",{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/Customer","sourcesContent":["<template>\r\n  <div class=\"page\">\r\n    <div class=\"search\">\r\n      <Input v-model=\"search.keyword\">\r\n        <Select v-model=\"search.type\" slot=\"prepend\" style=\"width: 80px\">\r\n          <Option value=\"householdId\">户号</Option>\r\n          <Option value=\"name\">姓名</Option>\r\n          <Option value=\"idNumber\">证件号</Option>\r\n        </Select>\r\n      </Input>\r\n      <Button type=\"primary\" icon=\"ios-search\">查询</Button>\r\n    </div>\r\n    <div class=\"button-group\">\r\n      <Button class=\"create\" to=\"/customer/add\" type=\"primary\" icon=\"ios-add\">新建</Button>\r\n    </div>\r\n    <div class=\"table\">\r\n      <Table :columns=\"columns\" :data=\"list\"></Table>\r\n    </div>\r\n    <div class=\"pagination\">\r\n      <div class=\"text\">共{{ total }}条记录 第 {{ pageNum }} / {{ Math.ceil(total / pageSize) }} 页</div>\r\n      <Page class=\"pager\" :current=\"pageNum\" :page-size=\"pageSize\" :total=\"total\" @on-change=\"changePage\" show-elevator />\r\n    </div>\r\n    <Modal\r\n      v-model=\"model.show\"\r\n      width=\"320\">\r\n      <p slot=\"header\" style=\"color:#f60;text-align:center\">\r\n        <Icon type=\"ios-information-circle\"></Icon>\r\n        <span>你确定要删除这行内容么？</span>\r\n      </p>\r\n      <div style=\"text-align:center\">\r\n        <p>{{ model.content }}</p>\r\n      </div>\r\n      <div slot=\"footer\">\r\n        <Button type=\"error\" size=\"large\" long :loading=\"model.loading\" @click=\"deleteUser\">删除</Button>\r\n      </div>\r\n    </Modal>\r\n    <Modal\r\n      width=\"50%\"\r\n      v-model=\"detail.show\"\r\n      :footer-hide=\"true\"\r\n      title=\"客户详情\">\r\n      <table class=\"detail-table\">\r\n        <tr>\r\n          <td width=\"15%\">姓名：</td>\r\n          <td width=\"35%\">{{ person.residentName }}</td>\r\n          <td width=\"18%\">名族：</td>\r\n          <td width=\"32%\">{{ person.nation }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>性别：</td>\r\n          <td>{{ person.sex }}</td>\r\n          <td>出生日期：</td>\r\n          <td>{{ person.birthdate }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>联系方式：</td>\r\n          <td>{{ person.contact }}</td>\r\n          <td>证件号码：</td>\r\n          <td>{{ person.idNumber }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>户别：</td>\r\n          <td>{{ person.householdType }}</td>\r\n          <td>户号：</td>\r\n          <td>{{ person.householdId }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>户主关系：</td>\r\n          <td>{{ person.relationship }}</td>\r\n          <td>纳入库名单：</td>\r\n          <td>{{ person.isInList }}</td>\r\n        </tr>\r\n        <tr>\r\n          <td>地址：</td>\r\n          <td>{{ person.address }}</td>\r\n          <td>备注：</td>\r\n          <td>{{ person.remark }}</td>\r\n        </tr>\r\n      </table>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport actions from '@/store/action-types'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      pageNum: 1,\r\n      pageSize: 5,\r\n      model: {\r\n        show: false,\r\n        title: '你确定要删除这行内容么？',\r\n        id: null,\r\n        content: '',\r\n        loading: false\r\n      },\r\n      detail: {\r\n        show: false\r\n      },\r\n      search: {\r\n        type: 'householdId',\r\n        keyword: ''\r\n      },\r\n      columns: [\r\n        {\r\n          title: '姓名',\r\n          key: 'residentName'\r\n        },\r\n        {\r\n          title: '性别',\r\n          key: 'sex'\r\n        },\r\n        {\r\n          title: '民族',\r\n          key: 'nation'\r\n        },\r\n        {\r\n          title: '出生日期',\r\n          key: 'birthdate'\r\n        },\r\n        {\r\n          title: '联系方式',\r\n          key: 'contact'\r\n        },\r\n        {\r\n          title: '证件号',\r\n          key: 'idNumber'\r\n        },\r\n        {\r\n          title: '户号',\r\n          key: 'householdId'\r\n        },\r\n        {\r\n          title: '纳入库名单',\r\n          key: 'isInList',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '操作',\r\n          key: 'action',\r\n          align: 'center',\r\n          width: 200,\r\n          render: (h, params) => {\r\n            return h('div', [\r\n              h('Button', {\r\n                props: {\r\n                  type: 'text',\r\n                  size: 'small'\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.show(params.row)\r\n                  }\r\n                }\r\n              }, '查看'),\r\n              /* h('Button', {\r\n                props: {\r\n                  type: 'text',\r\n                  size: 'small'\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.edit(params.row)\r\n                  }\r\n                }\r\n              }, '编辑'), */\r\n              h('Button', {\r\n                props: {\r\n                  type: 'text',\r\n                  size: 'small'\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.delete(params.row)\r\n                  }\r\n                }\r\n              }, '删除')\r\n            ])\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      list: state => state.customer.list,\r\n      person: state => state.customer.person,\r\n      total: state => state.customer.total\r\n    })\r\n  },\r\n  mounted () {\r\n    // 获取列表\r\n    this.fetchList()\r\n  },\r\n  methods: {\r\n    fetchList () {\r\n      return this.$store.dispatch(actions.get.RESIDENT_LIST, {\r\n        pageNum: this.pageNum,\r\n        pageSize: this.pageSize\r\n      })\r\n    },\r\n    changePage (num) {\r\n      console.log(num)\r\n      this.pageNum = num\r\n      this.fetchList()\r\n    },\r\n    show (row) {\r\n      this.$store.dispatch(actions.get.RESIDENT_PERSON, row.residentId)\r\n      this.detail.show = true\r\n    },\r\n    edit () {\r\n      console.log('edit')\r\n    },\r\n    delete (row) {\r\n      this.model.data = row\r\n      this.model.content = row.residentName\r\n      this.model.id = row.residentId\r\n      this.model.show = true\r\n    },\r\n    deleteUser () {\r\n      this.model.loading = true\r\n      setTimeout(() => {\r\n        this.model.loading = false\r\n        this.model.show = false\r\n        console.log(this.model.id)\r\n        this.$store.dispatch(actions.delete.RESIDENT_PERSON, this.model.id)\r\n        this.$Message.success('删除成功')\r\n      }, 2000)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.page {\r\n  margin: 20px;\r\n  padding: 20px;\r\n  background-color: #fff;\r\n  border: 1px solid #eee;\r\n  border-radius: 4px;\r\n  .search {\r\n    display: none;\r\n    width: 500px;\r\n    Button {\r\n      margin-left: 10px;\r\n    }\r\n  }\r\n  .button-group {\r\n    margin-top: 20px;\r\n    margin-bottom: 20px;\r\n  }\r\n  .table {\r\n    margin-bottom: 20px;\r\n    Button {\r\n      color: cornflowerblue;\r\n    }\r\n  }\r\n  .pagination {\r\n    width: 100%;\r\n    height: 32px;\r\n    .text {\r\n      float: left;\r\n      line-height: 32px;\r\n    }\r\n    .pager {\r\n      float: right;\r\n    }\r\n  }\r\n}\r\n.detail-table {\r\n  width: 100%;\r\n  font-size: 16px;\r\n  line-height: 32px;\r\n}\r\n</style>\r\n"]}]}